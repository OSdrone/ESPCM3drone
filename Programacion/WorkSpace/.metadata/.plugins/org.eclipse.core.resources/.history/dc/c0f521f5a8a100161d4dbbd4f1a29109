/*
 * TASK_AHRS.c
 *
 *  Created on: 1 de nov. de 2016
 *      Author: Ruben
 */
#include "TASK_AHRS.h"

	static tpAHRS AHRS;

void AHRS_TASK_FCN(void const * argument) {

	q15_t OrientacionMagnetica;

	tpLecturas9DOFIMU Lecturas9DOFIMU;



	while (1) {
		xSemaphoreTake(AHRS_SMPHRHandle, portMAX_DELAY);

		LeerLecturasIMU9DOF(&Lecturas9DOFIMU);

		OrientacionMagnetica = Compensacion_Sensor_magnetico(AHRS.OrientacionAHRS.Roll,
				AHRS.OrientacionAHRS.Pitch, &Lecturas9DOFIMU.LecturasBrujula)
	}
}

void AHRS_TIMER_FCN(void const * argument) {
	xSemaphoreGive(AHRS_SMPHRHandle);
}
